<div class="modal-header">
    <button type="button" class="close" ng-click="$dismiss()">
        &times;
    </button>
    <h4 class="modal-title">
        <img src="img/banner.png" width="100" alt="iTMS">
    </h4>
</div>



<div class="modal-body no-padding">
    <div class="panel-group smart-accordion-default" id="accordionres">
        <div class="panel panel-info">
            <div class="panel-heading">
                <h4 class="panel-title"><a data-toggle="collapse" data-parent="#accordionres" href="#collapseresOne"><i class="fa fa-lg fa-angle-down pull-left"></i><i class="fa fa-lg fa-angle-up pull-left"></i>资源搜索 </a></h4>
            </div>
            <div id="collapseresOne" class="panel-collapse collapse in">
                <div class="panel-body no-padding">
                    <form class="smart-form" novalidate>
                        <fieldset>
                            <div class="alert alert-warning fade in">
                                <button class="close" data-dismiss="alert">
                                    ×
                                </button>
                                <i class="fa-fw fa fa-warning"></i>
                                <strong>{{resourceData.ERID.length}}&nbsp;</strong>条ER需求项目被选择操作
                            </div>
                            <div class="row">
                                <section class="col col-4">
                                    <label class="select">
                                        <select ng-model="resourceSearchOption.type">
                                            <option value="" selected disabled>资源类型</option>
                                            <option ng-repeat="value in types" value="{{value.code}}">{{value.description}}</option>
                                        </select>
                                        <i></i>
                                    </label>
                                </section>
                                <section class="col col-4">
                                    <label class="select">
                                        <select ng-model="resourceSearchOption.owner">
                                            <option value="" selected disabled>资源归属</option>
                                            <option ng-repeat="value in owners" value="{{value.code}}">{{value.description}}</option>
                                        </select>
                                        <i></i>
                                    </label>
                                </section>
                            </div>
                        </fieldset>
                        <fieldset>
                            <div class="row">
                                <section class="col col-6">
                                    <label class="input">
                                        <i class="icon-prepend fa fa-filter"></i>
                                        <input type="text" name="code" ng-model="resourceSearchOption.matnr" placeholder="资源代码">
                                    </label>
                                </section>
                                <section class="col col-6">
                                    <label class="input">
                                        <i class="icon-prepend fa fa-filter"></i>
                                        <input type="text" name="code" ng-model="resourceSearchOption.description" placeholder="资源描述">
                                    </label>
                                </section>
                                <section class="col col-3">
                                    <label class="input">
                                        <i class="icon-prepend fa fa-tachometer "></i>
                                        <input type="text" name="code" ng-model="resourceSearchOption.LoadWgt" placeholder="规格参数1">
                                    </label>
                                </section>
                                <section class="col col-3">
                                    <label class="input">
                                        <i class="icon-prepend fa fa-tachometer"></i>
                                        <input type="text" name="code" ng-model="resourceSearchOption.Speed" placeholder="规格参数2">
                                    </label>
                                </section>
                                <section class="col col-3">
                                    <label class="input">
                                        <i class="icon-prepend fa fa-tachometer "></i>
                                        <input type="text" name="code" ng-model="resourceSearchOption.Vol" placeholder="规格参数3">
                                    </label>
                                </section>
                                <section class="col col-3">
                                    <label class="input">
                                        <i class="icon-prepend fa fa-tachometer "></i>
                                        <input type="text" name="code" ng-model="resourceSearchOption.SpecialTag1" placeholder="规格参数4">
                                    </label>
                                </section>
                            </div>
                            <div class="row">
                                <section class="col col-12">
                                    <button type="button" ng-click="resourceSearch()" class="btn btn-sm btn-success"><i class="fa fa-search"></i>&nbsp;资源搜索</button>
                                </section>
                            </div>
                        </fieldset>

                        <fieldset ng-show="showResult" tiny-table my-source="resources" columns="columns" select-mode="single">
                        </fieldset>


                        <!--
                       

                        <fieldset ng-show="showResult">
                            <section>

                                <table class="table table-bordered table-condensed">
                                    <thead>
                                        <tr>
                                            <th></th>
                                            <th>资源代码</th>
                                            <th>资源名称</th>
                                            <th>资源类型</th>
                                            <th>资源归属</th>
                                            <th>资源位置</th>
                                            <th>资源规格1</th>
                                            <th>资源规格2</th>
                                            <th>资源规格3</th>
                                            <th>资源规格4</th>
                                        </tr>
                                    </thead>
                                    <tbody>

                                        <tr ng-repeat="item in resources" ng-click="select($index)">
                                            <td>
                                                <label class="radio">
                                                    <input type="radio" ng-checked="item.selected" name="radio" />
                                                    <i></i>
                                                </label>
                                            </td>
                                            <td>{{item.matnr}}</td>
                                            <td>{{item.description}}</td>
                                            <td>{{item.type}}</td>
                                            <td>{{item.owner}}</td>
                                            <td>{{item.vendorLocation}}</td>
                                            <td>{{item.load}}</td>
                                            <td>{{item.speed}}</td>
                                            <td>{{item.vol}}</td>
                                            <td>{{item.specialTag1}}</td>
                                        </tr>
                                    </tbody>
                                </table>
                            </section>


                            <section class="pull-right auto-margin">
                                <ul class="sync-pagination pagination-sm pagination">
                                    <li class="first disabled"><a href="#">First</a></li>
                                    <li class="prev disabled"><a href="#">Previous</a></li>
                                    <li class="page active"><a href="#">1</a></li>
                                    <li class="page"><a href="#">2</a></li>
                                    <li class="page"><a href="#">3</a></li>
                                    <li class="page"><a href="#">4</a></li>
                                    <li class="page"><a href="#">5</a></li>
                                    <li class="next"><a href="#">Next</a></li>
                                    <li class="last"><a href="#">Last</a></li>
                                </ul>
                            </section>
                        </fieldset>
                        -->
                    </form>
                </div>
            </div>
        </div>
    </div>
    <form name="currentForm" class="smart-form" novalidate>
        <fieldset>
            <div ng-show="!resourceData.TranResID&&currentForm.varidating" class="alert alert-danger fade in">
                <i class="fa-fw fa fa-warning"></i>请选择资源。
            </div>
            <div class="row">
                <section class="col col-6" ng-class="{'state-error':currentForm.TranResLicense.$invalid && (currentForm.varidating||!currentForm.TranResLicense.$pristine)}">
                    <label class="input">
                        <i class="icon-prepend fa fa-filter"></i>
                        <input type="text" name="TranResLicense" name="code" ng-model="resourceData.TranResLicense" maxlength="20" placeholder="资源编号" required>
                        <b class="tooltip tooltip-right"><i class="fa fa-warning txt-color-teal"></i>例如车牌号等 </b>
                    </label>
                </section>
                <section class="col col-6" ng-class="{'state-error':currentForm.TransDriverID.$invalid && (currentForm.varidating||!currentForm.TransDriverID.$pristine)}">
                    <label class="input">
                        <i class="icon-prepend fa fa-filter"></i>
                        <input type="text" name="TransDriverID" ng-model="resourceData.TransDriverID" ng-maxlength="20" placeholder="司机手机号" required>
                    </label>
                </section>
            </div>
        </fieldset>
        <footer>
            <button class="btn btn-success" ng-click="doAssignResource()">分配并确认</button>
            <button class="btn btn-warning" ng-click="doAssignResource(true)">分配并保存为草稿</button>
            <button class="btn btn-default" ng-click="$dismiss()">返回</button>
        </footer>
    </form>
</div>
